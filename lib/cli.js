#!/usr/bin/env node
!function(o,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("apicloud-tools-core"),require("child_process"),require("ws"),require("path"),require("minimist"));else if("function"==typeof define&&define.amd)define(["apicloud-tools-core","child_process","ws","path","minimist"],e);else{var i="object"==typeof exports?e(require("apicloud-tools-core"),require("child_process"),require("ws"),require("path"),require("minimist")):e(o["apicloud-tools-core"],o.child_process,o.ws,o.path,o.minimist);for(var n in i)("object"==typeof exports?exports:o)[n]=i[n]}}(this,function(o,e,i,n,t){return function(o){function e(n){if(i[n])return i[n].exports;var t=i[n]={exports:{},id:n,loaded:!1};return o[n].call(t.exports,t,t.exports,e),t.loaded=!0,t.exports}var i={};return e.m=o,e.c=i,e.p="",e(0)}([function(o,e,i){"use strict";var n=i(1),t=i(6),r=i(7)(process.argv.slice(2));(r.v||r.version)&&(r._=["version"]);try{var p=r._[0];delete r._,r.workspace&&(r.workspace=t.resolve(r.workspace+"")),r.project&&(r.project=t.resolve(r.project+"")),r.file&&(r.file=t.resolve(r.file+"")),n[p](r)}catch(o){console.log(o),n.help(r)}},function(o,e,i){"use strict";function n(o){if(null==o)throw new TypeError("Cannot destructure undefined")}var t=i(2),r=i(3),p=(r.exec,i(4)),a="localhost",c=-1,s={version:function(o){n(o),console.log("apicloud-cli: "+i(5).version)},help:function(o){n(o);var e="\n  ***************** APICloud 通用命令行开发工具 ***********************\n\n  命令格式: apicloud 方法名 --参数名1 参数值2 --参数名2 参数值2\n\n  注意:\n  1.参数中的workspace,project和file,可以是相对路径或绝对路径;\n  2.支持的应用模板有: "+Object.keys(t.appTemplateConfig())+" ;\n  3.支持的页面模板有: "+Object.keys(t.fileTemplateConfig())+" ;\n  4.port 为wifi服务启动时的端口号;\n\n  命令示例\n\n  显示版本号:\n  apicloud version 或 apicloud -v 或 apicloud --version\n\n  显示帮助信息:\n  apicloud help\n\n  启动 wifi 服务:\n  apicloud wifiStart --port 8686\n\n  停止 wifi 服务:\n  apicloud wifiStop --port 8686\n\n  wifi 增量更新:\n  apicloud wifiSync --project ./ --updateAll false --port 8686\n\n  wifi 全量更新:\n  apicloud wifiSync --project ./ --updateAll true --port 8686\n\n  wifi 预览:\n  apicloud wifiPreview --file ./index.html --port 8686\n\n  获取 wifi 信息:\n  apicloud wifiInfo --port 8686\n\n  获取 wifi 调试日志:\n  apicloud wifiLog --port 8686\n\n  创建应用模板:\n  apicloud init --name HelloAPICloud --template home --workspace ./\n\n  创建页面模板:\n  apicloud initPage --name first_page --template page001 --project ./\n    ";console.log(e)},wifiStart:function(o){var e=o.port,i=void 0===e?8686:e;t.startWifi({port:i})},wifiStop:function(o){var e=o.port,i=void 0===e?8686:e,n=new p("ws://"+a+":"+i);n.on("open",function(){var o={command:c,payload:{method:"wifiStop",params:{}}};n.send(JSON.stringify(o))})},wifiSync:function(o){var e=o.project,i=void 0===e?"./":e,n=o.updateAll,t=void 0===n||n,r=o.port,s=void 0===r?8686:r,l=new p("ws://"+a+":"+s);l.on("open",function(){var o={command:c,payload:{method:"wifiSync",params:{project:i,updateAll:t}}};l.send(JSON.stringify(o))})},wifiPreview:function(o){var e=o.file,i=void 0===e?"./index.html":e,n=o.port,t=void 0===n?8686:n,r=new p("ws://"+a+":"+t);r.on("open",function(){var o={command:c,payload:{method:"wifiPreview",params:{file:i}}};r.send(JSON.stringify(o))})},wifiInfo:function(o){var e=o.port,i=void 0===e?8686:e,n=new p("ws://"+a+":"+i);n.on("open",function(){var o={command:c,payload:{method:"wifiInfo",params:{}}};n.send(JSON.stringify(o))}),n.on("message",function(o){var e=JSON.parse(o),i=e.payload,n=e.command;c===n&&console.log(JSON.stringify(i))})},wifiLog:function(o){var e=o.port,i=void 0===e?8686:e,n=new p("ws://"+a+":"+i);n.on("open",function(){var o={command:c,payload:{method:"wifiLog",params:{}}};n.send(JSON.stringify(o))}),n.on("message",function(o){var e=JSON.parse(o),i=e.payload,n=e.command;c===n&&console.log(JSON.stringify(i))})},init:function(o){var e=o.name,i=void 0===e?"HelloAPICloud":e,n=o.template,r=void 0===n?"home":n,p=o.workspace,a=void 0===p?"./":p;t.init({name:i,template:r,output:a})},initPage:function(o){var e=o.name,i=void 0===e?"first_page":e,n=o.template,r=void 0===n?"page001":n,p=o.project,a=void 0===p?"./":p;t.addFileTemplate({name:i,template:r,output:a})}};o.exports=s},function(o,e){o.exports=require("apicloud-tools-core")},function(o,e){o.exports=require("child_process")},function(o,e){o.exports=require("ws")},function(o,e){o.exports={name:"apicloud-cli",version:"0.0.7",description:"APICloud命令行工具",main:"./lib/cli.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/apicloudcom/apicloud-cli.git"},keywords:["APICloud","命令行","真机同步","日志输出","wifi"],bin:{apicloud:"./lib/cli.js"},author:"APICloud",license:"GPL-3.0",bugs:{url:"https://github.com/apicloudcom/apicloud-cli/issues"},homepage:"https://github.com/apicloudcom/apicloud-cli#readme",dependencies:{"apicloud-tools-core":"0.0.4",minimist:"^1.2.0",ws:"^1.1.1"},devDependencies:{"babel-cli":"^6.18.0","babel-core":"^6.18.2","babel-loader":"^6.2.7","babel-preset-latest":"^6.16.0","json-loader":"^0.5.4",webpack:"^1.13.3","source-map-support":"^0.4.6"}}},function(o,e){o.exports=require("path")},function(o,e){o.exports=require("minimist")}])});