#!/usr/bin/env node
!function(i,o){if("object"==typeof exports&&"object"==typeof module)module.exports=o(require("apicloud-tools-core"),require("child_process"),require("ws"),require("minimist"));else if("function"==typeof define&&define.amd)define(["apicloud-tools-core","child_process","ws","minimist"],o);else{var e="object"==typeof exports?o(require("apicloud-tools-core"),require("child_process"),require("ws"),require("minimist")):o(i["apicloud-tools-core"],i.child_process,i.ws,i.minimist);for(var n in e)("object"==typeof exports?exports:i)[n]=e[n]}}(this,function(i,o,e,n){return function(i){function o(n){if(e[n])return e[n].exports;var t=e[n]={exports:{},id:n,loaded:!1};return i[n].call(t.exports,t,t.exports,o),t.loaded=!0,t.exports}var e={};return o.m=i,o.c=e,o.p="",o(0)}([function(i,o,e){"use strict";var n=e(1),t=e(6)(process.argv.slice(2));(t.v||t.version)&&(t._=["version"]);try{var r=t._[0];delete t._,n[r](t)}catch(i){console.log(i),n.help(t)}},function(i,o,e){"use strict";function n(i){if(null==i)throw new TypeError("Cannot destructure undefined")}var t=e(2),r=e(3),p=(r.exec,e(4)),a="localhost",c=-1,s={version:function(i){n(i),console.log("apicloud-cli: "+e(5).version)},help:function(i){n(i);var o="\n  ***************** APICloud 通用命令行开发工具 ***********************\n\n  命令格式: apicloud 方法名 --参数名1 参数值2 --参数名2 参数值2\n\n  注意:\n  1.参数中的workspace,project和file,可以是相对路径或绝对路径;\n  2.支持的应用模板有: "+Object.keys(t.appTemplateConfig())+" ;\n  3.支持的页面模板有: "+Object.keys(t.fileTemplateConfig())+" ;\n  4.port 为wifi服务启动时的端口号;\n\n  命令示例\n\n  显示版本号:\n  apicloud version 或 apicloud -v 或 apicloud --version\n\n  显示帮助信息:\n  apicloud help\n\n  启动 wifi 服务:\n  apicloud wifiStart --port 8686\n\n  停止 wifi 服务:\n  apicloud wifiStop --port 8686\n\n  wifi 增量更新:\n  apicloud wifiSync --project ./ --updateAll false --port 8686\n\n  wifi 全量更新:\n  apicloud wifiSync --project ./ --updateAll true --port 8686\n\n  wifi 预览:\n  apicloud wifiPreview --file ./index.html --port 8686\n\n  获取 wifi 信息:\n  apicloud wifiInfo --port 8686\n\n  获取 wifi 调试日志:\n  apicloud wifiLog --port 8686\n\n  创建应用模板:\n  apicloud init --name HelloAPICloud --template home --workspace ./\n\n  创建页面模板:\n  apicloud initPage --name first_page --template page001 --project ./\n    ";console.log(o)},wifiStart:function(i){var o=i.port,e=void 0===o?8686:o;t.startWifi({port:e})},wifiStop:function(i){var o=i.port,e=void 0===o?8686:o,n=new p("ws://"+a+":"+e);n.on("open",function(){var i={command:c,payload:{method:"wifiStop",params:{}}};n.send(JSON.stringify(i))})},wifiSync:function(i){var o=i.project,e=void 0===o?"./":o,n=i.updateAll,t=void 0===n||n,r=i.port,s=void 0===r?8686:r,l=new p("ws://"+a+":"+s);l.on("open",function(){var i={command:c,payload:{method:"wifiSync",params:{project:e,updateAll:t}}};l.send(JSON.stringify(i))})},wifiPreview:function(i){var o=i.file,e=void 0===o?"./index.html":o,n=i.port,t=void 0===n?8686:n,r=new p("ws://"+a+":"+t);r.on("open",function(){var i={command:c,payload:{method:"wifiPreview",params:{file:e}}};r.send(JSON.stringify(i))})},wifiInfo:function(i){var o=i.port,e=void 0===o?8686:o,n=new p("ws://"+a+":"+e);n.on("open",function(){var i={command:c,payload:{method:"wifiInfo",params:{}}};n.send(JSON.stringify(i))}),n.on("message",function(i){var o=JSON.parse(i),e=o.payload,n=o.command;c===n&&console.log(JSON.stringify(e))})},wifiLog:function(i){var o=i.port,e=void 0===o?8686:o,n=new p("ws://"+a+":"+e);n.on("open",function(){var i={command:c,payload:{method:"wifiLog",params:{}}};n.send(JSON.stringify(i))}),n.on("message",function(i){var o=JSON.parse(i),e=o.payload,n=o.command;c===n&&console.log(JSON.stringify(e))})},init:function(i){var o=i.name,e=void 0===o?"HelloAPICloud":o,n=i.template,r=void 0===n?"home":n,p=i.workspace,a=void 0===p?"./":p;t.init({name:e,template:r,output:a})},initPage:function(i){var o=i.name,e=void 0===o?"first_page":o,n=i.template,r=void 0===n?"page001":n,p=i.project,a=void 0===p?"./":p;t.addFileTemplate({name:e,template:r,output:a})}};i.exports=s},function(i,o){i.exports=require("apicloud-tools-core")},function(i,o){i.exports=require("child_process")},function(i,o){i.exports=require("ws")},function(i,o){i.exports={name:"apicloud-cli",version:"0.0.2",description:"APICloud命令行工具",main:"./lib/cli.js",scripts:{test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/ios122/new-core-cli-private.git"},keywords:["APICloud","命令行","真机同步","日志输出","wifi"],bin:{apicloud:"./lib/cli.js"},author:"APICloud",license:"GPL-3.0",bugs:{url:"https://github.com/ios122/new-core-cli-private/issues"},homepage:"https://github.com/ios122/new-core-cli-private#readme",dependencies:{"apicloud-tools-core":"0.0.2",minimist:"^1.2.0",ws:"^1.1.1"},devDependencies:{"babel-cli":"^6.18.0","babel-core":"^6.18.2","babel-loader":"^6.2.7","babel-preset-latest":"^6.16.0","json-loader":"^0.5.4",webpack:"^1.13.3","source-map-support":"^0.4.6"}}},function(i,o){i.exports=require("minimist")}])});